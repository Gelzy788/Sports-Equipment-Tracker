# Система управления спортивным инвентарем

## Описание проекта

Система управления спортивным инвентарем представляет собой веб-приложение, разработанное на языке Python с использованием фреймворка Flask, предназначенное для автоматизации процессов учета и распределения спортивного инвентаря в организациях. Система предоставляет интерфейс как для администраторов, так и для обычных пользователей, позволяя эффективно отслеживать состояние оборудования, управлять запасами и контролировать выдачу инвентаря.

## Функциональные возможности

### Для администраторов:
- Управление учетными записями пользователей (создание, редактирование, удаление)
- Назначение прав администратора другим пользователям
- Полный контроль над инвентарем (добавление, редактирование, удаление)
- Управление выдачей инвентаря пользователям
- Обработка заявок на получение инвентаря
- Управление закупками инвентаря
- Просмотр статистики и отчетов
- Экспорт данных об инвентаре в Excel

### Для обычных пользователей:
- Просмотр доступного инвентаря
- Отправка заявок на получение инвентаря
- Управление своим профилем
- Просмотр своего инвентаря
- Получение уведомлений о статусе заявок

## Архитектура системы

Приложение разработано с использованием архитектурного подхода Model-View-Controller (MVC), что обеспечивает четкое разделение ответственности между компонентами системы:

- **Model** (модели данных) - представлены в файле models.py, описывают структуру базы данных с помощью ORM SQLAlchemy
- **View** (представления) - реализованы в папке templates с использованием шаблонизатора Jinja2
- **Controller** (контроллеры) - логика приложения, содержащаяся в app.py и user_app.py

### Основные компоненты системы:

- **app.py** - основной файл приложения, содержащий маршруты (endpoints) и основную логику
- **user_app.py** - содержит маршруты и функциональность для пользователей
- **models.py** - описание моделей данных
- **database.py** - функции для работы с базой данных
- **config.py** - конфигурация приложения
- **templates/** - HTML-шаблоны для представлений
- **static/** - статические файлы (CSS, JavaScript, изображения)

## Модели данных

### User (Пользователь)
- id - уникальный идентификатор пользователя
- username - имя пользователя
- email - адрес электронной почты
- password - хешированный пароль
- admin - флаг, указывающий на права администратора
- profile_picture - путь к изображению профиля

### Storage (Хранилище)
- id - уникальный идентификатор оборудования
- name - название оборудования
- count - количество единиц данного оборудования на складе
- status - статус оборудования (новое/в ремонте)

### Equipment (Оборудование)
- equipment_id - идентификатор оборудования (внешний ключ к Storage)
- user_id - идентификатор пользователя (внешний ключ к User)
- count - количество единиц данного оборудования у пользователя
- assigned_date - дата выдачи оборудования

### Requests (Заявки)
- id - уникальный идентификатор заявки
- user_id - идентификатор пользователя, создавшего заявку
- equipment_id - идентификатор запрашиваемого оборудования
- count - количество запрашиваемых единиц
- description - описание заявки
- request_type - тип заявки
- status - статус заявки (в обработке/одобрено/отклонено)
- created_at - дата создания заявки
- custom_description - дополнительное описание для заявок на нестандартное оборудование
- equipment_name - название запрашиваемого оборудования для нестандартных заявок
- status_viewed - флаг, указывающий, просмотрен ли статус заявки пользователем
- status_changed_at - дата изменения статуса заявки

### Purchases (Закупки)
- id - уникальный идентификатор закупки
- name_eq - название закупаемого оборудования
- price - цена за единицу
- count - количество закупаемых единиц
- supplier - поставщик
- status - статус закупки (выполнена/в процессе)

## Маршруты и функциональность

### Аутентификация и профиль
- /login - вход в систему
- /registration - регистрация нового пользователя
- /logout - выход из системы
- /profile - страница профиля пользователя
- /upload - загрузка изображения профиля

### Управление инвентарем
- /storage - страница управления складом (только для администраторов)
- /storage/add - добавление нового инвентаря
- /storage/edit/<item_id> - редактирование инвентаря
- /storage/delete/<item_id> - удаление инвентаря

### Управление пользователями
- /users - список всех пользователей (только для администраторов)
- /users/toggle_admin/<user_id> - изменение статуса администратора
- /profile/<user_id> - просмотр профиля пользователя

### Управление заявками
- /requests - просмотр и управление заявками
- /admin/request/<request_id>/<action> - обработка заявки администратором
- /create_custom_request - создание заявки на нестандартный инвентарь
- /mark_requests_viewed - отметка заявок как просмотренных

### Управление закупками
- /purchases - управление закупками инвентаря
- /purchases/toggle_status/<purchase_id> - изменение статуса закупки
- /purchases/delete/<purchase_id> - удаление закупки

### Мой инвентарь
- /my_inventory - просмотр инвентаря, выданного текущему пользователю
- /user_inventory/<user_id> - просмотр инвентаря, выданного конкретному пользователю

### API и экспорт
- /api/equipment/search - API для поиска оборудования
- /export_inventory - экспорт данных об инвентаре в Excel

## Процессы системы

### Процесс выдачи инвентаря
1. Пользователь создает заявку на получение инвентаря
2. Администратор рассматривает заявку
3. При одобрении заявки инвентарь перемещается со склада пользователю
4. Система автоматически отправляет уведомление пользователю о статусе заявки

### Процесс закупки инвентаря
1. Администратор создает запись о закупке инвентаря
2. После получения инвентаря от поставщика, администратор отмечает закупку как выполненную
3. Инвентарь автоматически добавляется на склад

## Технические особенности

### Безопасность
- Хранение паролей в хешированном виде с использованием werkzeug.security
- Защита от несанкционированного доступа с использованием Flask-Login
- Проверка прав доступа для административных функций

### Хранение данных
- Использование SQLite в качестве базы данных
- Автоматическое создание базы данных при первом запуске
- Использование SQLAlchemy для ORM

### Интерфейс пользователя
- Адаптивный дизайн, подходящий для различных устройств
- Использование JavaScript для интерактивных элементов
- Автоматические уведомления о статусе заявок

## Установка и настройка

### Системные требования
- Python 3.6 или выше
- Pip (менеджер пакетов Python)
- Свободное место на диске: от 100 МБ

### Установка
1. Скачайте архив проекта с GitHub: https://github.com/Gelzy788/Sports-Equipment-Tracker/archive/refs/heads/main.zip
2. Распакуйте архив в удобное место
3. Откройте командную строку и перейдите в папку проекта: `cd путь_до_папки/Sports-Equipment-Tracker-main`
4. Установите зависимости: `pip install -r requirements.txt`
5. Запустите приложение: `python app.py`
6. Откройте браузер и перейдите по адресу: http://localhost:5000

### Первичная настройка
1. При первом запуске система автоматически создаст базу данных
2. Зарегистрируйте первого пользователя через страницу регистрации
3. Первый зарегистрированный пользователь может быть назначен администратором через базу данных

## Часто задаваемые вопросы

### Как назначить пользователя администратором?
Администратор может назначить другого пользователя администратором через страницу управления пользователями.

### Как обрабатывать заявки?
Администратор должен перейти на страницу заявок (/requests), где можно одобрить или отклонить каждую заявку.

### Как добавить новое оборудование?
Администратор может добавить новое оборудование через страницу управления складом (/storage/add).

### Как восстановить пароль?
Функция восстановления пароля в текущей версии не реализована. В случае утери пароля рекомендуется обратиться к администратору системы.

## Устранение неполадок

### База данных не создается
- Убедитесь, что у вас есть права на запись в директорию с проектом
- Проверьте журнал ошибок в консоли для получения дополнительной информации

### Проблемы при установке зависимостей
- Убедитесь, что у вас установлена актуальная версия Python и pip
- Попробуйте использовать виртуальное окружение: `python -m venv venv` и активировать его перед установкой зависимостей

### Ошибки при загрузке изображений профиля
- Проверьте, что директория для загрузки изображений существует и доступна для записи
- Убедитесь, что вы загружаете файл допустимого формата (JPEG, PNG, GIF)

## Планы развития

### Ближайшие обновления
- Добавление функции восстановления пароля
- Расширение возможностей отчетности и аналитики
- Улучшение поиска и фильтрации инвентаря

### Долгосрочные планы
- Добавление мобильного приложения
- Интеграция со сканерами штрих-кодов/QR-кодов
- Расширенный модуль для управления ремонтами и техническим обслуживанием

## Обратная связь и поддержка

По вопросам работы с системой и для сообщения об ошибках обращайтесь:
- Через GitHub: https://github.com/Gelzy788/Sports-Equipment-Tracker/issues

